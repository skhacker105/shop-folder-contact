<lib-dynamic-layout title="Contact" backURL="/home" [hideDrawer]="true" [hideFilter]="false" [selectMode]="selectMode"
    [filters]="pageFilters" (selectModeChange)="handleSelectModeChange($event)" (onFilterUpdate)="handleFilterUpdate($event)">
    <ng-container selectaction>
        @if (gridApi && gridApi.getSelectedRows().length > 0){
        <mat-icon (click)="handleDeleteClick()">delete</mat-icon>
        }
    </ng-container>

    <ng-container gridaction>
        <mat-icon>add</mat-icon>
        <mat-icon (click)="triggerSync()">sync</mat-icon>
    </ng-container>

    <ng-container pagebody>
        @if (selectedView) {
        <ag-grid-angular class="table-view ag-theme-balham" [gridOptions]="grid" [rowData]="data"
            [columnDefs]="selectedView.columnDefs" [defaultColDef]="defaultColDef" [groupDefaultExpanded]="1"
            [groupSelectsChildren]="true" rowSelection="multiple" [autoGroupColumnDef]="selectedView.autoGroupColumnDef"
            (gridReady)="onGridReady($event)" (selectionChanged)="onSelectionChanged()">
        </ag-grid-angular>
        }
        @else {
        No view selected
        }
    </ng-container>

    <ng-container pagefooter>

        <!-- View -->
        <div class="views-menu">
            <mat-icon [matMenuTriggerFor]="viewMenu">more_vert</mat-icon>
            <mat-menu #viewMenu="matMenu">
                @for (view of gridViews; track view.viewName) {
                <button mat-menu-item (click)="updateSelectedView(view)" [ngClass]="{
                            'bg-selected-row text-selected-row': selectedView?.viewName === view.viewName
                        }">
                    <span>{{view.viewName}}</span>
                </button>
                }
            </mat-menu>
        </div>
        <div class="view-current" [matMenuTriggerFor]="viewMenu">
            {{ selectedView?.viewName }}
        </div>

        <div class="spacer"></div>

        @if (allExpanded) {
        <mat-icon (click)="collapseAll()">toggle_off</mat-icon>
        }
        @else {
        <mat-icon (click)="expandAll()">toggle_on</mat-icon>
        }
    </ng-container>
</lib-dynamic-layout>